<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>1 Full Build · Powder Model Documentation</title><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">Powder Model Documentation</a></span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><span class="tocitem">Tutorials</span><ul><li class="is-active"><a class="tocitem" href>1 Full Build</a><ul class="internal"><li><a class="tocitem" href="#Defining-the-Problem"><span>Defining the Problem</span></a></li><li><a class="tocitem" href="#Solving-the-Problem"><span>Solving the Problem</span></a></li></ul></li><li><a class="tocitem" href="../2_basic_tut/">2 Warm-up and Cool-down only</a></li><li><a class="tocitem" href="../3_material_tut/">3 A Melt Rate Based Material Model</a></li><li><a class="tocitem" href="../4_res_tut/">4 Saving More Results</a></li></ul></li><li><span class="tocitem">Reference</span><ul><li><input class="collapse-toggle" id="menuitem-3-1" type="checkbox"/><label class="tocitem" for="menuitem-3-1"><span class="docs-label">Public API</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../reference/api/">Main API</a></li><li><a class="tocitem" href="../../reference/api_adv/">Advanced API</a></li><li><a class="tocitem" href="../../reference/BoundaryExamples/">HSS Boundary</a></li><li><a class="tocitem" href="../../reference/PostProcessing/">Post proccessing</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-2" type="checkbox"/><label class="tocitem" for="menuitem-3-2"><span class="docs-label">Internals</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../reference/internal_api/">Internal APIs</a></li><li><a class="tocitem" href="../../reference/internals/">Private Internals</a></li></ul></li></ul></li><li><span class="tocitem">Recipes</span><ul><li><a class="tocitem" href="../../howtos/howto_ink/">Ink Patterns</a></li><li><a class="tocitem" href="../../howtos/howto_subsets/">Simulate Subsets of a Build</a></li><li><a class="tocitem" href="../../howtos/howto_mat/">Materials</a></li><li><a class="tocitem" href="../../howtos/howto_matprop/">Material Models</a></li><li><a class="tocitem" href="../../howtos/howto_result/">Results</a></li><li><a class="tocitem" href="../../howtos/howto_load/">Loads and Load Sets</a></li><li><a class="tocitem" href="../../howtos/howto_bound/">Boundaries</a></li><li><a class="tocitem" href="../../howtos/howto_param/">Problem Parameters</a></li><li><a class="tocitem" href="../../howtos/howto_loadset/">Load Set Types</a></li><li><a class="tocitem" href="../../howtos/howto_problem/">Problem Solvers</a></li></ul></li><li><span class="tocitem">Explanation</span><ul><li><a class="tocitem" href="../../explanation/HSSBoundary/">HSS Boundary</a></li><li><a class="tocitem" href="../../reference/MaterialExamples/">Material examples</a></li><li><a class="tocitem" href="../../explanation/faqs/">FAQs</a></li></ul></li><li><a class="tocitem" href="../../doc_index/">Index</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Tutorials</a></li><li class="is-active"><a href>1 Full Build</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>1 Full Build</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/Oliver-Leete/HSSSimulations.jl/blob/main/docs/lit/full_tut.jl" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Tutorial-1:-Full-Build"><a class="docs-heading-anchor" href="#Tutorial-1:-Full-Build">Tutorial 1: Full Build</a><a id="Tutorial-1:-Full-Build-1"></a><a class="docs-heading-anchor-permalink" href="#Tutorial-1:-Full-Build" title="Permalink"></a></h1><p><a href="tutorials/mybinder.org/v2/gh/Oliver-Leete/HSSSimulations.jl/main?filepath=examples/1_full_tut.ipynb"><img src="https://mybinder.org/badge_logo.svg" alt/></a> <a href="tutorials/nbviewer.org/github/Oliver-Leete/HSSSimulations.jl/blob/main/examples/1_full_tut.ipynb"><img src="https://img.shields.io/badge/show-nbviewer-579ACA.svg" alt/></a></p><pre><code class="language-julia hljs">using HSSSimulations</code></pre><p>This tutorial will cover how to create a simulation problem, solve it, and inspect the results. It differs from the <a href="../2_basic_tut/#Tutorial-2:-Warm-up-and-Cool-down-only">Tutorial 2: Warm-up and Cool-down only</a> (which I will assume you have gone through) by actually trying to simulate part of a printer build, instead of a contrived situation. This means we&#39;ll have preheat loads, layers being added and complex boundary conditions. Whilst the simulation is more complicated, some setup is actually easier, as this is what the package was built for.</p><h2 id="Defining-the-Problem"><a class="docs-heading-anchor" href="#Defining-the-Problem">Defining the Problem</a><a id="Defining-the-Problem-1"></a><a class="docs-heading-anchor-permalink" href="#Defining-the-Problem" title="Permalink"></a></h2><p>Like before, we&#39;ll start by defining the geometry:</p><pre><code class="language-julia hljs">geometry = Geometry(
    (0.016, 0.016, 0.0122),
    0.001,
    1.5e-3;
    Δz=0.003 / 90,
    Δh=0.0001,
    offset=(0.0925, 0.1425),
    buildSize=(0.200, 0.300),
    name=&quot;30 layers preheat, 50 pre square pad layers 32 layer thich square and 10 post square padding layers&quot;,
)</code></pre><p>There are some additional arguments given here, let&#39;s go over them quickly. In the basic simulation we specified the node spacing as the second argument, and this specified the spacing in all three axis. Here we add a <code>Δz</code> argument, when this is given it overrides the node spacing for this one axis. This is useful as we want the spacing in the z-axis to be the same as the layer height, but using the same spacing in all axes would limit the size of the simulation. This leads nicely on to <code>Δh</code>, which is the layer thickness in meters (100 microns in this case).</p><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>A <code>Δy</code> argument can also be given to override the node spacing in the y-axis. There is no equivalent for the x-axis, instead just give the desired spacing as the default and use the <code>Δz</code> and <code>Δy</code> overrides to get the desired spacing.</p></div></div><p>The last two are the <code>buildSize</code> and <code>offset</code>. It is often useful to simulate a subset of the build volume (mostly for memory and computational cost reasons), to do this we can specify the true size of the machine (<code>buildSize</code>) and where the simulation sits within it (<code>offset</code>). Both of these are given in meters.</p><p>We&#39;ll use the other built-in material this time, a version of the PA2200 material used before that has the rate of change of consolidation state dependent on more than just temperature.</p><pre><code class="language-julia hljs">material = PA2200(geometry)</code></pre><p>This time around we can just use the load sets provided by <a href="../../reference/BoundaryExamples/#HSSSimulations.HSSBound.HSSLoads"><code>HSSLoads</code></a>, without having to muck about with it ourselves. Here we define the skip (in this case lets go for 10), and a few extra key word arguments that decide how many preheat and cooldown loads to have, along with how long they should be (so preheat time in this case is 90x10, for 900 seconds total).</p><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>Multiple short loads are used in cases where the load case stays the same for a while. The solver only saves results from memory to disk in between loads, so splitting it up reduces the memory requirement (at the cost of a slight increase in computational cost).</p></div></div><pre><code class="language-julia hljs">params = HSSParams(geometry)
loadSets = HSSLoads(4, geometry; nrPreheat=90, lenPreheat=10.0, nrCool=90, lenCool=10.0)</code></pre><p>When we specify the initial results, we&#39;ll also specify the <code>initialLayer</code>, this will be used to tell the simulation how many layers worth of powder should be already deposited at the start of the simulation. Theses are the layers that will be simulated during the preheat load set.</p><pre><code class="language-julia hljs">geomsize = (geometry.X, geometry.Y, geometry.Z)
init = Result(geomsize, 25.0, 0.0, 0.0, 0.0, 0)
initialLayer = 30</code></pre><p>The <a href="../../reference/api/#HSSSimulations.Types.Ink"><code>Ink</code></a> struct for this problem is going to have some actual ink in it. To do this we will fill a subset of the <code>inkArray</code> with a value of <code>1.0</code> this is making the assumption that our ink is a perfect absorber of our lamp&#39;s energy. And we&#39;ll also change the name of the <code>Ink</code> to represent this.</p><pre><code class="language-julia hljs">inkArray = fill(material.eₚ, size)
inkArray[5:end-4, 5:end-4, 90:end-30] .= material.eᵢ
ink = Ink(inkArray, &quot;Sample square&quot;)</code></pre><p>And like before we will give the problem a name and description and then create it.</p><pre><code class="language-julia hljs">file = &quot;full_build_simulation_tutorial.jld2&quot;
description = &quot;A full simulation of a sample square&quot;
problem = Problem(;
    geometry=geometry,
    matProp=material,
    params=params,
    preheatLoads=preheatLoads,
    buildLoads=buildLoads,
    cooldownLoads=cooldownLoads,
    init=init,
    initLay=initialLayer,
    ink=ink,
    file=file,
    description=description,
)</code></pre><h2 id="Solving-the-Problem"><a class="docs-heading-anchor" href="#Solving-the-Problem">Solving the Problem</a><a id="Solving-the-Problem-1"></a><a class="docs-heading-anchor-permalink" href="#Solving-the-Problem" title="Permalink"></a></h2><p>Like before, this part is simple for you. But now it is even more complicated for the computer.</p><pre><code class="language-julia hljs">resultFile, finalResults = problemSolver(problem)</code></pre><div class="admonition is-success"><header class="admonition-header">Performance Tips</header><div class="admonition-body"><p>The simulation will only run on one proccessor, but will run on as many threads as you can give it. So if you haven&#39;t already, try starting juila with the <code>--threads=auto</code> flag to give the simulation more threads to work with. If you are using a notebook you will need to look into how to make a kernel that uses multiple threads.</p><p>If it is still running too slow you can try playing around with the geometry sizes, the x and y-axis node spacing or the time step (just be aware that changing node spacing and time step can lead to unstable simulations, normally resultsing in an out of bounds error). And if you run into memory issues you can try increasing the value of <code>skip</code> (<a href="../../explanation/faqs/#Why-We-Skip-Some-Results">Why We Skip Some Results</a>).</p></div></div><hr/><p><em>This page was generated using <a href="https://github.com/fredrikekre/Literate.jl">Literate.jl</a>.</em></p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../../">« Home</a><a class="docs-footer-nextpage" href="../2_basic_tut/">2 Warm-up and Cool-down only »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.24 on <span class="colophon-date" title="Monday 19 June 2023 15:35">Monday 19 June 2023</span>. Using Julia version 1.9.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
